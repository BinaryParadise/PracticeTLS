//
//  File.swift
//  
//
//  Created by Rake Yang on 2021/9/24.
//

import Foundation
import XCTest
@testable import QUIC

class QUICTests: XCTestCase {
    func testInitial() {
        let data = "cc000000010844064de373001a7203fe79e40042152f58de8791e929c6f00c1d25990d7e95867706869d6327d8c1f64aec2b576d131cd91a63c6f27c19cf609e90b5123242bc6a34ef87906647752db74a15d604056c9974efa30501f48a3fd2e86efa407690a98f098216e2855fc5db9048a1bf19b53f809d903e1d553d54cb6c8be96330399dd772856b63edc7f7d86916377bf7343fdcfbb35b01f25659725021879a57dcc9bb146ed0e627be6173eee60d327efac31ed61fdffe4a71457d9e0fa69786ec0b220cbccb707bcf0b79fd2b6e23d4c8b6cc19731f5e1344f4cc739a7bd98ac652f1caa90690ea5601bf7aaf3312c7f00f0f74470ac050590e4320be005ae5d92385af4797327631f8484f2224ac7c8dcd1237963ec8552160b54ec561b3add56d490ad588a779c58733b7c6bcde26e0fa2a95d3a8d45a0a88c9a2120851ee41c9865dd98f5888111ae9edabc0f128c7b5ea67842ec8126e51ffd955ab8e535950aee6b9f5462f239ac4e93b14c35cc306c6e461fe7d9b09b3248e95eb5d20cbdd47de081e04dc42244d2ae11ed6a7c4255e711d78a433d6a328c06bf285c7c5871001ec5731e57215f60ed6313bddc8de9ae6203e96f75a08e70db491640c555dbe07a0cab4d9f21cfad9489ba687fba16bfadaf57aa999712ae498dca2d9476724813350f7fe0ab724898a88c2a8a2de1836005be9088a6161c4233e702ad84647a9e414e704f45b137128eb3702fca83bd59805fb48bbc4f7332538bfe9893f4729940000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000".uint8Array

        
        let packet = QUIC.PacketInitial(data)
        XCTAssertEqual(packet.version, .v1)
        XCTAssertEqual(packet.number, 11)
        XCTAssertEqual(packet.payload.count, 532)
    }
}
